#!/bin/sh
# Minimal builder for dmenu.bin

TARGET=dmenu.bin
ROOTFS=myrootfs.ext2   # Replace with your rootfs
BOOT_SCRIPT=boot.sh     # Your custom boot.sh

# Make sure output folder exists
mkdir -p output

# Copy the rootfs into output
cp "$ROOTFS" output/

# Optional: if you want extra data, you can prepare it here
# e.g., splash screens or configs (skipped in minimal version)

# Build dmenu.bin
cat "$BOOT_SCRIPT" > "$TARGET"
echo BINARY >> "$TARGET"

# Add the rootfs to the dmenu.bin in uuencoded form
cd output
uuencode "$(basename $ROOTFS)" "$(basename $ROOTFS)" >> "../$TARGET"
cd ..

echo "Built $TARGET successfully."
